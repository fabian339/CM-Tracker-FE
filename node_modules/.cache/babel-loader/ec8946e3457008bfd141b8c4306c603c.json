{"ast":null,"code":"import { SET_ADMIN, SET_ERRORS, CLEAR_ERRORS, LOADING_UI, SET_UNAUTHENTICATED, LOADING_ADMIN, STOP_LOADING_UI, SET_ORGANIZATION, MARCK_NOTIFICATIONS_READ } from '../types';\nimport { getSecrets } from './dataActions';\nimport axios from 'axios'; // export const loginUser = (userData, history) => (dispatch) => {\n//     dispatch({ type: LOADING_UI });\n//     axios.post('/login', userData)\n//     .then((res) => {\n//         setAuthorizationHeader(res.data.token);\n//         dispatch(getUserData());\n//         dispatch({ type: CLEAR_ERRORS});\n//         history.push('/');\n//     })\n//     .catch(err => {\n//       dispatch({\n//           type: SET_ERRORS,\n//           payload: err.response.data\n//       })\n//     });\n// }\n\nexport const adminRegistration = (newAdminData, history) => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  axios.post('/registerAdmin', newAdminData).then(res => {\n    setAuthorizationHeader(res.data.token);\n    dispatch(getAdminData());\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n    history.push('/org-register');\n  }).catch(err => {\n    console.log(err);\n    dispatch({\n      type: SET_ERRORS,\n      payload: err.response.data\n    });\n  });\n};\nexport const registerOrg = (newOrgData, history) => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  axios.post('/orgRegister', newOrgData).then(res => {\n    console.log(\"CALLED\"); // setAuthorizationHeader(res.data.token);\n    // dispatch(getAdminData());\n    // dispatch({ type: CLEAR_ERRORS});\n    // history.push('/modules');\n  }).catch(err => {\n    console.log(err); //   dispatch({\n    //       type: SET_ERRORS,\n    //       payload: err.response.data\n    //   })\n  });\n};\nexport const getOrgData = orgId => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  axios.get(`/organization/${orgId}`).then(res => {\n    dispatch({\n      type: SET_ORGANIZATION,\n      payload: res.data\n    });\n    dispatch({\n      type: STOP_LOADING_UI\n    });\n  }).catch(err => console.log(err));\n};\nexport const logoutAdminUser = () => dispatch => {\n  localStorage.removeItem('FBIdToken');\n  delete axios.defaults.headers.common['Authorization'];\n  dispatch({\n    type: SET_UNAUTHENTICATED\n  });\n};\nexport const getAdminData = () => dispatch => {\n  dispatch({\n    type: LOADING_ADMIN\n  });\n  console.log(\"Calledd\");\n  axios.get('/admin').then(res => {\n    dispatch({\n      type: SET_ADMIN,\n      payload: res.data\n    }); // console.log(\"PayloadData-->\", res.data)\n  }).catch(err => {\n    console.log(err);\n  });\n}; // export const uploadImage = (formData) => (dispatch) => {\n//     // dispatch( { type: ON_IMAGE_CHANGE });\n//     dispatch({ type: LOADING_USER });\n//     axios.post('/user/image', formData)\n//     .then(() => {\n//         dispatch(getUserData());\n//         //refetch secrets from serve after 2 seconds to avoid incorrect data\n//         setTimeout(() => {dispatch(getSecrets(true))}, 2500);\n//     })\n//     .catch(err => console.log(err));\n// }\n// export const editUserDetails = (userDetails) => (dispatch) => {\n//     dispatch({ type: LOADING_USER});\n//     axios.post('/user', userDetails)\n//     .then(() => {\n//         dispatch(getUserData());\n//     })\n//     .catch(err => console.log(err));\n// }\n// export const markNotificationsRead = (notificationIds) => (dispatch) => {\n//     axios.post('/notifications', notificationIds)\n//     .then(res => {\n//         dispatch({ type: MARCK_NOTIFICATIONS_READ })\n//     })\n//     .catch(err => console.log(err));\n// }\n\nconst setAuthorizationHeader = token => {\n  const FBIdToken = `Bearer ${token}`;\n  localStorage.setItem('FBIdToken', FBIdToken);\n  axios.defaults.headers.common['Authorization'] = FBIdToken;\n};","map":{"version":3,"sources":["/home/mikebladez/Documents/cm-tracker/CM-Tracker-FE/src/redux/actions/adminActions.js"],"names":["SET_ADMIN","SET_ERRORS","CLEAR_ERRORS","LOADING_UI","SET_UNAUTHENTICATED","LOADING_ADMIN","STOP_LOADING_UI","SET_ORGANIZATION","MARCK_NOTIFICATIONS_READ","getSecrets","axios","adminRegistration","newAdminData","history","dispatch","type","post","then","res","setAuthorizationHeader","data","token","getAdminData","push","catch","err","console","log","payload","response","registerOrg","newOrgData","getOrgData","orgId","get","logoutAdminUser","localStorage","removeItem","defaults","headers","common","FBIdToken","setItem"],"mappings":"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","sourcesContent":["import { \n    SET_ADMIN, \n    SET_ERRORS, \n    CLEAR_ERRORS, \n    LOADING_UI, \n    SET_UNAUTHENTICATED, \n    LOADING_ADMIN,\n    STOP_LOADING_UI,\n    SET_ORGANIZATION, \n    MARCK_NOTIFICATIONS_READ,\n    } from '../types';\n\n    import {getSecrets} from './dataActions'\n\nimport axios from 'axios';\n\n// export const loginUser = (userData, history) => (dispatch) => {\n//     dispatch({ type: LOADING_UI });\n//     axios.post('/login', userData)\n//     .then((res) => {\n//         setAuthorizationHeader(res.data.token);\n//         dispatch(getUserData());\n//         dispatch({ type: CLEAR_ERRORS});\n//         history.push('/');\n//     })\n//     .catch(err => {\n//       dispatch({\n//           type: SET_ERRORS,\n//           payload: err.response.data\n//       })\n\n//     });\n// }\n\n\nexport const adminRegistration = (newAdminData, history) => (dispatch) => {\n\n    dispatch({ type: LOADING_UI });\n    axios.post('/registerAdmin', newAdminData)\n    .then((res) => {\n        setAuthorizationHeader(res.data.token);\n        dispatch(getAdminData());\n        dispatch({ type: CLEAR_ERRORS});\n        history.push('/org-register');\n    })\n    .catch(err => {\n        console.log(err)\n      dispatch({\n          type: SET_ERRORS,\n          payload: err.response.data\n      })\n\n    });\n}\n\nexport const registerOrg = (newOrgData, history) => (dispatch) => {\n    dispatch({ type: LOADING_UI });\n    axios.post('/orgRegister', newOrgData)\n    .then((res) => {\n        console.log(\"CALLED\")\n\n        // setAuthorizationHeader(res.data.token);\n        // dispatch(getAdminData());\n        // dispatch({ type: CLEAR_ERRORS});\n        // history.push('/modules');\n    })\n    .catch(err => {\n        console.log(err)\n    //   dispatch({\n    //       type: SET_ERRORS,\n    //       payload: err.response.data\n    //   })\n\n    });\n}\n\nexport const getOrgData = (orgId) => (dispatch) => {\n    dispatch({ type: LOADING_UI });\n    axios.get(`/organization/${orgId}`)\n    .then((res) => {\n        dispatch({\n            type: SET_ORGANIZATION,\n            payload: res.data\n        });\n        dispatch({ type: STOP_LOADING_UI })\n    })\n    .catch(err =>  console.log(err) );\n}\n\n\n\nexport const logoutAdminUser = () => (dispatch) => {\n    localStorage.removeItem('FBIdToken');\n    delete axios.defaults.headers.common['Authorization'];\n    dispatch({ type: SET_UNAUTHENTICATED });\n}\n\n\n\nexport const getAdminData = () => (dispatch) => {\n    dispatch({ type: LOADING_ADMIN });\n            console.log(\"Calledd\")\n    axios.get('/admin')\n    .then((res) => {\n        dispatch({\n            type: SET_ADMIN,\n            payload: res.data\n        })\n        // console.log(\"PayloadData-->\", res.data)\n    })\n    .catch(err => {\n        console.log(err);\n    })\n}\n\n\n// export const uploadImage = (formData) => (dispatch) => {\n//     // dispatch( { type: ON_IMAGE_CHANGE });\n//     dispatch({ type: LOADING_USER });\n//     axios.post('/user/image', formData)\n//     .then(() => {\n//         dispatch(getUserData());\n//         //refetch secrets from serve after 2 seconds to avoid incorrect data\n//         setTimeout(() => {dispatch(getSecrets(true))}, 2500);\n//     })\n//     .catch(err => console.log(err));\n// }\n\n\n// export const editUserDetails = (userDetails) => (dispatch) => {\n//     dispatch({ type: LOADING_USER});\n\n//     axios.post('/user', userDetails)\n//     .then(() => {\n//         dispatch(getUserData());\n//     })\n//     .catch(err => console.log(err));\n// }\n\n\n// export const markNotificationsRead = (notificationIds) => (dispatch) => {\n//     axios.post('/notifications', notificationIds)\n//     .then(res => {\n//         dispatch({ type: MARCK_NOTIFICATIONS_READ })\n//     })\n//     .catch(err => console.log(err));\n// }\n\n\nconst setAuthorizationHeader = (token) => {\n    const FBIdToken = `Bearer ${token}`;\n    localStorage.setItem('FBIdToken', FBIdToken);\n    axios.defaults.headers.common['Authorization'] = FBIdToken;\n}"]},"metadata":{},"sourceType":"module"}