(this["webpackJsonpcm-tracker"]=this["webpackJsonpcm-tracker"]||[]).push([[0],{101:function(e,t,a){},128:function(e,t,a){},135:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),l=a.n(o),i=(a(101),a(24)),c=a(15),s=a(28),m=a(29),u=a(32),d=a(20),p=a(183),h=a(18),g=a.n(h),E=function(e){return function(t){t({type:"LOADING_ADMIN"}),g.a.get("/admin/".concat(e)).then((function(e){t({type:"SET_ADMIN",payload:e.data})})).catch((function(e){console.log(e.response.data),t({type:"SET_ERRORS",payload:e.response.data})}))}},f=function(){return function(e){localStorage.removeItem("FBIdToken"),localStorage.removeItem("fullname"),e({type:"SET_UNAUTHENTICATED_ADMIN"}),delete g.a.defaults.headers.common.Authorization,localStorage.removeItem("role")}},y=function(e,t,a){var n="Bearer ".concat(e);localStorage.setItem("FBIdToken",n),localStorage.setItem("role",t),localStorage.setItem("fullname",a),g.a.defaults.headers.common.Authorization=n},b=a(178),T=a(182),v=a(184),S=a(185),A=a(82),I=a.n(A),O=a(43).Link,w={navContainer:{backgroundColor:"mediumturquoise"},navButtons:{fontSize:"initial",color:"dimgray",fontWeight:"600"},title:{flexGrow:1},menuItem:{fontSize:"13px",fontWeight:"600",color:"dimgray"}},x=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={anchorEl:null,open:!1},a.handleClick=function(e){a.setState({open:!0,anchorEl:e.currentTarget})},a.handleRequestClose=function(e){console.log("Nav",e),a.setState({open:!1})},a.handleLogOut=function(){console.log("logout called"),a.props.logoutUser()},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.authenticatedAdmin;return r.a.createElement(b.a,null,r.a.createElement(T.a,{style:w.navContainer},r.a.createElement(p.a,{variant:"h6",style:w.title},r.a.createElement(v.a,{style:w.navButtons,color:"inherit",component:O,to:"/"},"CM-Tracker")),e?r.a.createElement(n.Fragment,null,r.a.createElement(S.a,{title:"Log Out","aria-label":"add"},r.a.createElement(v.a,{style:{color:"dimgray"},onClick:this.handleLogOut,component:O,to:"/"},r.a.createElement(I.a,null)))):r.a.createElement(n.Fragment,null,r.a.createElement(v.a,{style:w.navButtons,color:"inherit",component:O,to:"/login"},"Login"))))}}]),t}(n.Component),C=Object(d.b)((function(e){return{authenticatedAdmin:e.user.authenticatedAdmin,user:e.user}}),{logoutUser:f})(x),_=a(9),k=a(83),j=a.n(k),D={textField:{margin:"10px auto 10px auto",width:"80%"},logoContainer:{marginTop:"80px",textAlign:"center"},pageTitle:{marginTop:"-10px",marginBottom:"10px",textAlign:"center",background:"-webkit-linear-gradient(#eee, #333)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},button:{marginTop:20,width:250,position:"relative",margin:"auto 15%"},form:{textAlign:"center"},progress:{position:"absolute",color:"chartreuse",width:"40px",height:"40px"},customError:{color:"red",fontSize:"1rem",marginTop:10}},N=a(186),R=a(194),U=a(187),L=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).handleSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginFunc(a,e.props.history)},e.handleChange=function(t){e.setState(Object(_.a)({},t.target.name,t.target.value))},e.state={email:"",password:"",errors:[]},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props.UI.loading,t=this.state.errors;return r.a.createElement(N.a,null,r.a.createElement("header",null,r.a.createElement("div",{style:D.logoContainer},r.a.createElement("img",{src:j.a,alt:"icon",style:{width:250}})),r.a.createElement(p.a,{variant:"h4",style:D.pageTitle},"Log In")),r.a.createElement(N.a,{container:!0},r.a.createElement(N.a,{item:!0,sm:!0}),r.a.createElement(N.a,{item:!0,sm:!0},r.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit,style:D.form},r.a.createElement(R.a,{required:!0,id:"email",name:"email",type:"email",label:"Email",style:D.textField,helperText:t.email,error:!!t.email,value:this.state.email,onChange:this.handleChange,fullWidth:!0}),r.a.createElement(R.a,{required:!0,id:"password",name:"password",type:"password",label:"Password",style:D.textField,helperText:t.password,error:!!t.password,value:this.state.password,onChange:this.handleChange,fullWidth:!0}),t.general&&r.a.createElement(p.a,{variant:"body2",style:D.customError},t.general),r.a.createElement(v.a,{type:"submit",variant:"contained",color:"primary",style:D.button}," Login",e&&r.a.createElement(U.a,{size:30,style:D.progress})))),r.a.createElement(N.a,{item:!0,sm:!0})))}}]),t}(n.Component),z=Object(d.b)((function(e){return{UI:e.UI}}),{loginFunc:function(e,t){return function(a){a({type:"LOADING_UI"}),g.a.post("/login",e).then((function(e){y(e.data.token,e.data.role,e.data.fullname),"admin"===e.data.role&&(a(E(e.data.fullname)),a({type:"SET_AUTHENTICATED_ADMIN"}),a({type:"CLEAR_ERRORS"}),t.push("timesheet/".concat(e.data.fullname)))})).catch((function(e){a({type:"SET_ERRORS",payload:e.response.data})}))}}})(L),W=a(2),F=a(35),M=a(4),B=function(e){var t=e.component,a=e.authenticatedAdmin,n=Object(W.a)(e,["component","authenticatedAdmin"]);return r.a.createElement(F.d,Object.assign({},n,{render:function(e){return!0===a?r.a.createElement(t,e):r.a.createElement(F.c,{to:"/UNAUTHORIZED"})}}))};B.prototype={admin:a.n(M).a.object};var G=Object(d.b)((function(e){return{authenticatedAdmin:e.user.authenticatedAdmin}}))(B),H=a(84),P=a.n(H),V=(a(128),a(13)),q={width:"200px",bottom:"45px",marginLeft:"50px",color:"white",borderRadius:"20px"},X={pageTitle:{marginTop:"90px",marginBottom:"40px",textAlign:"center"},container:{marginTop:"-10px"},personIcon:{height:"100%",width:"100%",color:"lightseagreen"},adminBtn:Object(V.a)({},q,{backgroundColor:"darkblue"}),progress:{position:"absolute",color:"chartreuse",width:"40px",height:"40px"},userBtn:Object(V.a)({},q,{backgroundColor:"darkmagenta"}),clientBtn:Object(V.a)({},q,{backgroundColor:"darkgoldenrod"}),onBtnHover:Object(V.a)({},q,{backgroundImage:"linear-gradient(to bottom right, red, yellow)",color:"black"}),btnDetails:{width:"200px",marginLeft:"50px",marginTop:"-30px"},logoContainer:{marginTop:"80px",textAlign:"center"}},J=a(49),Y=a(195),Z=function(e){var t=e.options,a=e.name,n=e.value,o=e.onInputChange,l=e.label,i=e.style,c=e.helperText,s=e.error;return r.a.createElement(Y.a,{options:t,value:n,onInputChange:o,name:a,renderInput:function(e){return r.a.createElement(R.a,Object.assign({},e,{required:!0,label:l,margin:"normal",variant:"outlined",style:i,helperText:c,error:s,InputProps:Object(V.a)({},e.InputProps,{type:"search"})}))}})},$=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).handleSubmit=function(t){t.preventDefault();var a={name:e.state.name,actType:e.state.actType,numberofCalls:parseInt(e.state.numberofCalls)};e.props.checkInOut(a,e.props.history)},e.handleChange=function(t){e.setState(Object(_.a)({},t.target.name,t.target.value))},e.handleActivityType=function(t,a){e.setState({actType:a})},e.state={name:"",actType:"",numberofCalls:0,message:"",errors:{}},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e,t=this.state.errors,a=this.props.data,n=a.loading,o=a.message;return r.a.createElement(J.Flash,null,r.a.createElement(N.a,{container:!0},r.a.createElement(N.a,{item:!0,sm:!0}),r.a.createElement(N.a,{item:!0,sm:8},r.a.createElement(p.a,{variant:"h4",style:X.pageTitle},"NDA INTERNS TIMESHEET"),r.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit,style:X.form},r.a.createElement(R.a,{required:!0,id:"name",name:"name",type:"name",variant:"outlined",label:"First and last name",style:{width:"40%",margin:"20px 30%"},onChange:this.handleChange,helperText:t.name,error:!!t.name,value:this.state.name}),r.a.createElement(Z,{options:["Clock-in","Clock-out"],onInputChange:this.handleActivityType,name:"actType",label:"Are you clocking in or out?",style:{width:"40%",margin:"20px 30%"},helperText:t.actType,error:!!t.actType,value:this.state.actType}),"Clock-out"===this.state.actType&&r.a.createElement(R.a,(e={required:!0,id:"numberofCalls",name:"numberofCalls",type:"numberofCalls",onChange:this.handleChange,variant:"outlined"},Object(_.a)(e,"type","number"),Object(_.a)(e,"label","Enter number of calls:"),Object(_.a)(e,"style",{width:"40%",margin:"20px 30%"}),Object(_.a)(e,"value",this.state.numberofCalls),e)),r.a.createElement(v.a,{type:"submit",variant:"contained",color:"primary",style:{width:"40%",margin:"20px 30%"},disabled:!1}," Submit",n&&r.a.createElement(U.a,{size:30,style:X.progress})),r.a.createElement("br",null),t.message&&r.a.createElement(p.a,{variant:"h6",style:{textAlign:"center",color:"red"}},t.message),r.a.createElement(p.a,{variant:"h6",style:{textAlign:"center",color:"blue"}},o.message))),r.a.createElement(N.a,{item:!0,sm:!0})))}}]),t}(n.Component),K=Object(d.b)((function(e){return{data:e.data,UI:e.UI}}),{checkInOut:function(e,t){return function(t){t({type:"LOADING_DATA"}),g.a.post("/eshTimesheet",e).then((function(e){t({type:"SET_MESSAGE",payload:e.data}),setInterval((function(){window.location.reload()}),3e3)})).catch((function(e){t({type:"SET_ERRORS",payload:e.response.data}),t({type:"SET_MESSAGE",payload:[]})}))}}})($),Q=a(189),ee=a(193),te=a(192),ae=a(188),ne=a(190),re=a(191),oe=a(85),le=a(59),ie=a.n(le),ce=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).handleChange=function(t){e.setState({filter:t.target.value})},e.state={completed:[],pending:[],filter:""},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.getActivities()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.data.activities,a=t.completed,n=t.pending;a&&n&&this.setState({completed:a,pending:n})}},{key:"onDownloadClick",value:function(){window.confirm("Are you sure you want to delete this database?")&&g.a.delete("/cleanDatabase").then((function(e){setInterval((function(){window.location.reload()}),3e3)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.props.data.loading,t=this.state,a=t.completed,o=t.pending,l=t.filter,i=a;return l&&(i=a.filter((function(e){return e.name===l}))),r.a.createElement(ae.a,null,r.a.createElement(p.a,{variant:"h4",style:X.pageTitle},"NDA REPORT TIMESHEET (",ie()().tz("America/New_York").format("L"),")"),e?r.a.createElement(U.a,{size:100,style:{margin:"auto 50%"}}):r.a.createElement(J.Shake,{duration:2.5},r.a.createElement(n.Fragment,null,r.a.createElement(oe.CSVLink,{data:a,filename:"timesheet-".concat(ie()().tz("America/New_York").format("L"),".csv"),style:{margin:"auto 50%"},target:"_blank",onClick:this.onDownloadClick},"Download"),r.a.createElement(R.a,{id:"filter",name:"filter",type:"name",variant:"outlined",label:"Search by name",style:{margin:"auto 45%",width:"15%"},onChange:this.handleChange}),r.a.createElement(Q.a,{"aria-label":"simple table",style:{margin:"2.5% auto",width:1e3,backgroundColor:"darkseagreen"}},r.a.createElement(ne.a,null,r.a.createElement(re.a,null,r.a.createElement(te.a,{style:{fontWeight:"bolder",fontSize:"20px"}},"Name"),r.a.createElement(te.a,{align:"right",style:{fontWeight:"bolder",fontSize:"20px"}},"Date"),r.a.createElement(te.a,{align:"right",style:{fontWeight:"bolder",fontSize:"20px"}},"Time-in"),r.a.createElement(te.a,{align:"right",style:{fontWeight:"bolder",fontSize:"20px"}},"Time-out"),r.a.createElement(te.a,{align:"right",style:{fontWeight:"bolder",fontSize:"20px"}},"Duration"),r.a.createElement(te.a,{align:"right",style:{fontWeight:"bolder",fontSize:"20px"}},"Status"))),r.a.createElement(ee.a,null,i.map((function(e){return r.a.createElement(re.a,{key:e.name},r.a.createElement(te.a,{component:"th",scope:"row"},e.name),r.a.createElement(te.a,{align:"right"},e.date),r.a.createElement(te.a,{align:"right"},e.timeIn),r.a.createElement(te.a,{align:"right"},e.timeOut),r.a.createElement(te.a,{align:"right"},e.duration),r.a.createElement(te.a,{align:"right"},e.status))})))),r.a.createElement(p.a,{variant:"h4",style:X.pageTitle},"TIMESHEET LOGS"),r.a.createElement(Q.a,{"aria-label":"simple table",style:{margin:"2.5% auto",width:1e3}},r.a.createElement(ne.a,null,r.a.createElement(re.a,null,r.a.createElement(te.a,{style:{fontWeight:"bolder",fontSize:"20px"}},"Name"),r.a.createElement(te.a,{align:"right",style:{fontWeight:"bolder",fontSize:"20px"}},"Date"),r.a.createElement(te.a,{align:"right",style:{fontWeight:"bolder",fontSize:"20px"}},"Time"),r.a.createElement(te.a,{align:"right",style:{fontWeight:"bolder",fontSize:"20px"}},"Type"),r.a.createElement(te.a,{align:"right",style:{fontWeight:"bolder",fontSize:"20px"}},"Status"))),r.a.createElement(ee.a,null,o.map((function(e){return r.a.createElement(re.a,{key:e.name},r.a.createElement(te.a,{component:"th",scope:"row"},e.name),r.a.createElement(te.a,{align:"right"},e.date),r.a.createElement(te.a,{align:"right"},e.time),r.a.createElement(te.a,{align:"right"},e.actType),r.a.createElement(te.a,{align:"right"},e.status))})))))))}}]),t}(n.Component),se=Object(d.b)((function(e){return{data:e.data}}),{getActivities:function(e){return function(e){e({type:"LOADING_DATA"}),g.a.get("/dataFromTimesheets").then((function(t){e({type:"SET_ACTIVITIES_DATA",payload:t.data})})).catch((function(t){e({type:"SET_ACTIVITIES_DATA",payload:[]})}))}}})(ce),me=a(38),ue=a(86),de={authenticatedAdmin:!1,loading:!1,adminInformation:{}},pe={activities:{},message:{},loading:!1},he={loading:!1,errors:null},ge=[ue.a],Ee=Object(me.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTHENTICATED_ADMIN":return Object(V.a)({},e,{authenticatedAdmin:!0});case"SET_UNAUTHENTICATED_ADMIN":return de;case"SET_ADMIN":return console.log("NAMEE",t.payload),{authenticatedAdmin:!0,loading:!1,adminInformation:t.payload};case"LOADING_ADMIN":return Object(V.a)({},e,{loading:!0});default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_DATA":return Object(V.a)({},e,{loading:!0});case"SET_ACTIVITIES_DATA":return Object(V.a)({},e,{activities:t.payload,loading:!1});case"SET_MESSAGE":return{loading:!1,message:t.payload};default:return e}},UI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERRORS":return Object(V.a)({},e,{loading:!1,errors:t.payload});case"CLEAR_ERRORS":return Object(V.a)({},e,{loading:!1,errors:null});case"LOADING_UI":return Object(V.a)({},e,{loading:!0});case"STOP_LOADING_UI":return Object(V.a)({},e,{loading:!1});default:return e}}}),fe=Object(me.e)(Ee,{},Object(me.d)(me.a.apply(void 0,ge),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),ye=a(43);g.a.defaults.baseURL="https://us-central1-cm-tracker-492ed.cloudfunctions.net/api";var be=localStorage.FBIdToken;be&&(1e3*P()(be).exp<Date.now()?(fe.dispatch(f()),window.location.href="/login"):"admin"===localStorage.role?(fe.dispatch({type:"SET_AUTHENTICATED_ADMIN"}),g.a.defaults.headers.common.Authorization=be):"regular-user"===localStorage.accType&&(fe.dispatch({type:"SET_AUTHENTICATED_USER"}),g.a.defaults.headers.common.Authorization=be));var Te=function(){return r.a.createElement(d.a,{store:fe},r.a.createElement(ye.BrowserRouter,null,r.a.createElement(C,null),r.a.createElement(F.g,null,r.a.createElement(F.d,{exact:!0,path:"/",component:K}),r.a.createElement(F.d,{exact:!0,path:"/login",component:z}),r.a.createElement(G,{exact:!0,path:"/timesheet/:fullname",component:se}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},83:function(e,t,a){e.exports=a.p+"static/media/ori_logo.4603f0d1.png"},96:function(e,t,a){e.exports=a(135)}},[[96,1,2]]]);
//# sourceMappingURL=main.70993fb7.chunk.js.map